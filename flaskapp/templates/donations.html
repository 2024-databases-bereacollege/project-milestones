<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donations Table</title>
    <link rel="stylesheet" href="../static/main.css">
</head>
<body>

    <aside>
        <!-- Sidebar navigation -->
        <nav>
          <div class="admin-div">
            <p>Admin Panel</p>
            <img class="admin-pic" src="https://annemariesegal.com/wp-content/uploads/2017/04/adobestock_86346713-cropped-young-woman-in-suit.jpg?w=640">
          </div>
          <ul class="tables-div">
            <li><a href="main">Chapters</a></li>
            <li><a href="members">Members</a></li>
            <li><a href="donations">Donations</a></li>
            <li><a href="events">Events</a></li>
          </ul>
        </nav>
      </aside>

<section>
    <header>
        <h2>Donations</h2>
    </header>
    <table>
        <caption>Section 10</caption>
        <thead>
            <tr>
                <th>ID</th>
                <th>Item</th>
                <th>Monetary Worth</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for donation in donations %}
            <tr>
                <td>{{ donation.donor_id }}</td>
                <td>{{ donation.item }}</td>
                <td>${{ donation.monetaryWorth }}</td>
                <td><button type="button">View/Update</button></td>
            </tr>
            {% endfor %}
        </tbody>
        
    </table>
    <div id="addDonationModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <form id="addDonationForm" method="post" action="/add_donation">
                <label for="donor_id">Donor ID:</label>
                <input type="number" id="donor_id" name="donor_id" required><br>
                <label for="item">Item:</label>
                <input type="text" id="item" name="item" required><br>
                <label for="monetaryWorth">Monetary Worth:</label>
                <input type="number" id="monetaryWorth" name="monetaryWorth" required><br>
                <input type="submit" value="Add Donation">
            </form>
        </div>
    </div>
</section>

<script>
document.addEventListener("DOMContentLoaded", function() {
    var donationModal = document.getElementById('addDonationModal');
    var donationBtn = document.getElementById('addDonationBtn');
    var closeSpan = document.querySelector('.modal .close');  // Ensure this targets the correct element

    console.log("Modal:", donationModal);  // Debugging output
    console.log("Button:", donationBtn);   // Debugging output
    console.log("Close:", closeSpan);      // Debugging output

    if (donationBtn) {
        donationBtn.onclick = function() {
            console.log("Button clicked");  // Debugging output
            donationModal.style.display = 'block';
        };
    } else {
        console.log('Button not found');
    }

    if (closeSpan) {
        closeSpan.onclick = function() {
            console.log("Closing modal");  // Debugging output
            donationModal.style.display = 'none';
        };
    }

    window.onclick = function(event) {
        if (event.target == donationModal) {
            console.log("Clicked outside modal");  // Debugging output
            donationModal.style.display = 'none';
        }
    };
});

</script>
    

</body>
</html>
